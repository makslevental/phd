

% \subsubsection{Pushforwards and Pullbacks}\label{subsubsec:diffgeo}

% Define a diffeomorphism \(\phi\) such that
% %
% \begin{equation}
%     \phi\colon (r, \theta) \mapsto (r \cos \theta, r \sin \theta)
% \end{equation}
% %
% The Jacobian of \(\phi\)
% %
% \begin{equation}
%     \operatorname{J}
%     =
%     \begin{bmatrix}
%         \pdv{\phi_1}{r} & \pdv{\phi_1}{\theta} \\
%         \pdv{\phi_2}{r} & \pdv{\phi_2}{\theta}
%     \end{bmatrix}
%     =
%     \begin{bmatrix}
%         \cos \theta & -r \sin \theta \\
%         \sin \theta & r \cos \theta
%     \end{bmatrix}
% \end{equation}
% %
% Note that \(\det \operatorname{J} = r\) and so \(\phi\) is a diffeomorphism iff \(r \neq 0\).
% %
% Given a vector field
% %
% \begin{equation}
%     v = a(r, \theta) \partial_r + b(r, \theta)\partial_\theta \coloneqq a(r, \theta) \pdv{}{r} + b(r, \theta)\pdv{}{\theta}
% \end{equation}
% %
% we can compute the \newterm{pushforward} \(\phi_*\) wrt the \(\partial_x, \partial_y\) basis
% \begin{equation}
%     \phi_* (v)
%     =
%     \begin{bmatrix}
%         \cos (\theta) & -r \sin (\theta) \\
%         \sin (\theta) & r \cos (\theta)
%     \end{bmatrix}
%     \cdot
%     \begin{pmatrix}
%         a \\ b
%     \end{pmatrix}
%     =
%     \begin{pmatrix}
%         a \cos (\theta) - br \sin (\theta) \\
%         a\sin (\theta) + br \cos (\theta)
%     \end{pmatrix}
% \end{equation}
% Hence, explicitly
% \begin{equation}
%     \phi_* (v) = (a \cos (\theta) - br \sin (\theta))\partial_x + (a\sin (\theta) + br \cos (\theta))\partial_y
% \end{equation}

% Since \(\operatorname{J}\) is invertible we can investigate which vector fields map to \(\partial_x\)
% %
% \begin{equation}
%     \phi_* v = \partial_x  \iff v = \phi_{*}^{-1} \partial_x
% \end{equation}
% %
% Let \(v = a \partial_r + b \partial_\theta\).
% %
% Then
% \begin{equation}
%     v
%     =
%     \begin{bmatrix}
%         \cos (\theta)            & \sin (\theta)           \\
%         -\frac{\sin (\theta)}{r} & \frac{\cos (\theta)}{r} \\
%     \end{bmatrix}
%     \cdot
%     \begin{pmatrix}
%         1 \\ 0
%     \end{pmatrix} \\
%     =
%     \begin{pmatrix}
%         \cos(\theta) \\ -\frac{\sin (\theta)}{r}
%     \end{pmatrix}
% \end{equation}
% However we need to write \(r, \theta\) in terms of \(x, y\)
% \begin{equation}
%      \phi_{*}^{-1} \partial_x = \frac{x}{\sqrt{x^2+y^2}}\partial_r + \frac{y}{x^2 + y^2} \partial_\theta
% \end{equation}
% %
% \(\phi_{*}^{-1}\) is called the \newterm{pullback} \(\phi^*\) of the vector field \(\partial_x\) along \(\phi\).

\section{Differential Geometry}\label{sec:dg}
\localtableofcontents

\subsection{Directional Derivative}

Elements of the \newterm{tangent space} \(T_p (\mathbb{R}^n)\) anchored at a point \(p = (p^1, \dots, p^n) \in \mathbb{R}^n\) can be visualized as arrows emanating from \(p\).
%
These arrows are called \newterm{tangent vectors} and represented by column vectors:
%
\begin{equation}
    \bm{v}
    =
    \begin{bmatrix}
        v^1 \\ \vdots \\ v^n
    \end{bmatrix}
    % =
    % \begin{bmatrix}
    %     v^1, \dots, v^n    
    % \end{bmatrix}
\end{equation}
%
The line through a point \(p\) with direction \(\bm{v}\) has parameterization
%
\begin{equation}
    c(t) = \left( p^1 + t v^1, \dots, p^n + t v^n \right)
\end{equation}
%
If \(f \in C^\infty\) in a neighborhood of \(p\) and \(\bm{v}\) is a tangent vector at \(p\), the \newterm{directional derivative} of \(f\) in the direction of \(\bm{v}\) at \(p\) is defined
%
\begin{equation}
    D_{\bm{v}} f
    =
    \lim_{t\rightarrow 0}\, \frac{f(c(t)) - f(p)}{t}
    =
    \evalat[\bigg]{\dv{}{t} f(c(t))}{t=0}
\end{equation}
%
By the chain rule
%
\begin{align}
    D_{\bm{v}} f & = \sum_{i=1}^{n} \evalat[\bigg]{\pdv{f}{x^i}}{p} \evalat[\bigg]{\dv{c^i}{t}}{t=0} \\
                 & = \sum_{i=1}^{n} \evalat[\bigg]{\dv{c^i}{t}}{t=0} \evalat[\bigg]{\pdv{f}{x^i}}{p} \\
                 & = \sum_{i=1}^{n} v^i \evalat[\bigg]{\pdv{f}{x^i}}{p}\label{eqn:chainrule}         \\
\end{align}
%
The directional derivative operator at \(p\) is defined
%
\begin{equation}
    D_{\bm{v}} = \sum_{i=1}^{n} v^i \evalat[\bigg]{\pdv{}{x^i}}{p}
\end{equation}
%
The association \(\bm{v} \mapsto D_{\bm{v}}\) offers a way to \newterm{isomorphically} identify tangent vectors with operators on functions.
%
The following makes this rigorous.

\subsection{Derivations}

For each tangent vector \(\bm{v}\) at a point \(p \in \mathbb{R}^n\), the directional derivative at \(p\) gives a map of vector spaces
%
\begin{equation*}
    D_{\bm{v}} \colon C_p^\infty \rightarrow \mathbb{R}
\end{equation*}
%
\(D_{\bm{v}}\) is a linear map that satisfies the \newterm{Leibniz rule}
%
\begin{equation}
    D_{\bm{v}}(fg) = (D_{\bm{v}}f)g(p) + f(p) (D_{\bm{v}}g)
\end{equation}
%
because the partial derivative satisfy the product rule.
%
In general, any linear map \(L\colon C_p^\infty \rightarrow \mathbb{R}\) that satisfies the Leibniz rule is called a \newterm{derivation} at \(p\).
% or a \textit{point derivation} of \(C_p^\infty\). 
%
Denote the set of all derivations at \(p\) by \(\mathcal{D}_p(\mathbb{R}^n)\).
%
\textbf{This set is also a real vector space}.
%

So far we know directional derivatives \(D_{\bm{v}}\) at \(p\) are derivations at \(p\).
%
Thus, there is a map
\begin{align*}
    \phi\colon T_p(\mathbb{R}^n) & \rightarrow \mathcal{D}_p (\mathbb{R}^n) \\
    \bm{v}                       & \mapsto D_{\bm{v}}
\end{align*}
%
\begin{theorem}{}{}
    The linear map \(\phi\) is an isomorphism of vector spaces.
\end{theorem}
%
\noindent The implication is that we may identify tangent vectors at \(p\) with derivations at \(p\) (by way of directional derivatives against germs).
%
Under this isomorphism \(T_p(\mathbb{R}^n) \simeq \mathcal{D}_p(\mathbb{R}^n)\), the standard basis \(\left\{ e_1, \dots, e_n \right\}\) for \(T_p(\mathbb{R}^n)\) maps to
%
\begin{equation}
    \left\{\evalat[\bigg]{\pdv{}{x^1}}{p}, \dots, \evalat[\bigg]{\pdv{}{x^n}}{p}  \right\}\label{eqn:tangentbasis}
\end{equation}
%
Therefore from now on we write a tangent vector as
%
\begin{equation}
    \bm{v} = \sum_{i=1}^{n} v^i \evalat[\bigg]{\pdv{}{x^i}}{p}
\end{equation}
%
The point being that, while not as geometrically intuitive as arrows, \(\mathcal{D}_p (\mathbb{R}^n)\) generalizes to manifolds.

\subsection{Vector Fields}

A \newterm{vector field} \(X\) on an open \(U \subset \mathbb{R}^n\) is function that assigns to \(p \in U\) a tangent vector \(X_p \in T_p(\mathbb{R}^n)\).
%
Notice, carefully, that the vector field assigns at each point a vector in the tangent space anchored at that point.
%
Using the tangent basis (eqn.~\eqref{eqn:tangentbasis})
%
\begin{equation}
    X\colon p \mapsto \sum_i a^i(p) \evalat[\bigg]{\pdv{}{x^i}}{p}
\end{equation}
%
Note that both the coefficients \textbf{and} the partial derivatives are evaluated at \(p\).
%
Having said that, we often omit \(p\) in the specification of a vector field when it clear from context.
%
\begin{example}{}{}
    On \(\mathbb{R}^n - \{\bm{0}\}\), let \(p = (x,y)\). Then
    \begin{align*}
        X & = \frac{-y}{\sqrt{x^2+y^2}} \pdv{}{x} + \frac{x}{\sqrt{x^2+y^2}} \pdv{}{y} \\
          & = \begin{bmatrix}
            \frac{-y}{\sqrt{x^2+y^2}} \\ \frac{x}{\sqrt{x^2+y^2}}
        \end{bmatrix}                                               \\
          & = \begin{bmatrix}
            \frac{-y}{\sqrt{x^2+y^2}} & \frac{x}{\sqrt{x^2+y^2}}
        \end{bmatrix}^T
    \end{align*}
\end{example}
%
See figure~\ref{fig:vectorfields}
% \loadfig{vecfields}

In general we can identify vector fields with parameterized column vectors
%
\begin{equation}
    X = \sum_i a^i(p) \evalat[\bigg]{\pdv{}{x^i}}{p}
    \leftrightarrow
    \begin{bmatrix}
        a^1(p) \\ \vdots \\ a^n(p)
    \end{bmatrix}
\end{equation}

\subsection{Dual Space}

\newcommand{\pdx}[1]{\partial_{x_{#1}}}
\newcommand*{\vwedge}{V^\wedge }
\newcommand*{\vx}{X = \sum a^i \partial_{x_i}}

The \newterm{dual space} \(\vwedge\) of \(V\) is the set of all real-valued linear functions on \(V\) i.e. all \(f \colon V \rightarrow \R\).
%
Elements of \(\vwedge\) are called \newterm{covectors}.

Assume \(V\) is finite dimensional and let \(\{e_1, \dots, e_n\}\) be a basis \(V\).
%
Recall that \(e_i \coloneqq \partial_{x_i}\).
%
Then \(\vx\) for all \(X \in T_p\).
%
Let \(\alpha^i \colon V \rightarrow \mathbb{R}\) be the linear function that picks out the \(i\)th coordinate of a \textbf{vector}, i.e. \(\alpha^i(X) = a^i(p)\).
%
Note that
%
\begin{align}
    \alpha^i(\partial_j) & = \alpha^i(1\cdot \partial_j) \\
                         & = \begin{cases}
        1 \text{ if } i = j \\
        0 \text{ if } i \neq j
    \end{cases}  \\
                         & =\delta_j^i
\end{align}
%
Note that position of indices is important -- upper indices are for covectors.
%
\begin{proposition}{}{}
    \(\{\alpha^i\}\) form a basis for \(\vwedge\).
\end{proposition}
%
\begin{proof}
    %
    We first prove that \(\{\alpha^i\}\) span \(\vwedge\). If \(f \in V^\wedge\) and \(\vx \in V\), then
    %
    \begin{align}
        f(X) & = \sum a^i f(\pdx{i})          \\
             & = \sum \alpha^i(X) f(\pdx{i})  \\
             & = \sum f(\pdx{i}) \alpha^i (X)
    \end{align}
    %
    which shows that any \(f\) can be expanded as a linear sum of \(\alpha^i\).
    %
    To show linear independence, suppose \(\sum c_i \alpha^i = 0\) with at least one \(c_i\) non-zero. Applying this to an arbitrary \(\pdx{i}\) gives
    %
    \begin{equation}
        0 = \left(\sum_i c_i \alpha^i   \right)(\pdx{i}) = \sum_i c_i \alpha^i(\pdx{i}) = \sum_i c_i \delta_j^i = c_j
    \end{equation}
    %
    which is a contradiction. Hence \(\alpha^i\) are linearly independent.
    %
\end{proof}
%
This basis \(\{\alpha^i\}\) for \(\vwedge\) is said to be \textit{dual} to the basis \(\{\pdx{i}\}\) for \(V\).
%
\begin{example}{Coordinate functions}{}
    %
    With respect to a basis \(\{\pdx{i}\}\) for \(V\), every \(X \in V\) can be written uniquely as a linear combination \(\vx\) with \(a^i \in \R\). Let \(\{\alpha^i\}\) be the dual basis (i.e. the basis for \(\vwedge\)).
    %
    Then
    %
    \begin{align*}
        \alpha^i(X) & = \alpha^i \left( \sum_j a^j \pdx{j} \right) \\
                    & = \sum_j a^j \alpha^i(\pdx{j})               \\
                    & = \sum_j a^j \delta_j^i                      \\
                    & = a^i
    \end{align*}
    %
    Thus, the dual basis \(\{\alpha^i\}\) to \(\{\pdx{i}\}\) is the set of coordinate functions.
    %
    The sense here is that since tangent vectors are directional derivatives (i.e.\ operators on functions) and the dual space is a mapping from those operators to \(\R\), then a mapping from operators to scalars means hitting an operator with a function (or vice-versa). \textbf{And} the coordinate functions are constant with respect to each other coordinate (and hence partials wrt them are naturally zero).
\end{example}

\subsection{Differential Forms on \(\R^n\)}

A differential \(k\)-form assigns a \(k\)-covector from the dual space at each point \(p\).
%
The wedge product (alternation of tensor product) of differential forms is defined pointwise (as the wedge product of multi-covectors).
%
Differential forms exist on an open set (why?) there is a notion of differentiation (called exterior derivative).
%
Exterior derivative is coordinate independent and intrinsic to a manifold; it is the abstraction of gradient, curl, divergence to arbitrary manifolds.
%
Differential forms extend Grassmann's exterior algebra (graded algebra of multi-covectors) from the tangent space at a point globally, i.e. to the entire manifold (how? bundles?).

\subsubsection{Differential of a Function}

\newcommand{\cotsp}[1]{T_p^*(\R^{#1})}
\newcommand{\tsp}[1]{T_p(\R^{#1})}
\newcommand{\w}{\omega}

\begin{definition}{Cotangent Space}{}
    The \newterm{cotangent space} to \(\R^n\) at \(p\), denoted \(\cotsp{n}\), is defined to be the dual space \((\tsp{n})^\vee\) of the tangent space \(\tsp{n}\).
\end{definition}
%
Thus, an element of the cotangent space \(\cotsp{n}\) is a \textbf{covector of linear functional on tangent space}.
%
\begin{definition}{Differential 1-form}{}
    A \newterm{covector field} or a \newterm{differential 1-form} on an open subset \(U\) of \(\R^n\) is a function \(\w\) that assigns at each point \(p\) in \(U\) a covector \(\w_p \in \cotsp{n}\)
    %
    \begin{splitenv}
        \w \colon U &\rightarrow \bigcup_{p \in U} \cotsp{n} \\
        p &\mapsto \w_p \in \cotsp{n}
    \end{splitenv}
    We call a differential 1-form a \newterm{1-form} for short.
\end{definition}
%
\begin{definition}{Differential}{}
    From any \(C^\infty\) function \(f\colon U \rightarrow \R\), we can construct the 1-form \(\dif f\), called the \newterm{differential} of \(f\), as follows: for \(p \in U\) and \(X_p \in T_p(U)\)
    \begin{equation}
        (\dif f)_p (X_p) \coloneqq X_p f
    \end{equation}
    In words the differential of \(f\) is the application of \(X_p\) to \(f\) or \textbf{the directional derivative of \(f\) in the direction of the tangent vector defined by the coefficients of \(X_p\)}.
\end{definition}

Let \(x^1, \dots, x^n\) be the standard coordinates on \(\R\), \(\{(\dif x^1)_p, \dots, (\dif x^n)_p\}\) their differentials defined
\[
    (\dif x^i)_p (X_p) \coloneqq (X_p)(x^i)
\]
%
and
%
\[
    \left\{\evalat[\bigg]{\pdv{}{x^1}}{p}, \dots,  \evalat[\bigg]{\pdv{}{x^n}}{p}  \right\}
\]
%
be the standard basis for \(\tsp{n}\).
%
\begin{proposition}{}{dfbasis}
    \(\{(\dif x^1)_p, \dots, (\dif x^n)_p\}\) is the basis for \(\cotsp{n}\) dual to the coordinate basis for \(\tsp{n}\).
\end{proposition}
%
\begin{proof}
    By definition,
    \[
        (\dif x^i)_p \left( \evalat[\bigg]{\pdv{}{x^j}}{p} \right) = \evalat[\bigg]{\pdv{x^i}{x^j}}{p} = \delta_j^i
    \]
\end{proof}

If \(\w\) is a 1-form on \(U \in \R^n\) then by proposition~\eqref{prop:dfbasis}, at each point \(p \in U\)
%
\[
    \w_p = \sum a_i(p)(dx^i)_p
\]
%
Note the lower index on \(a_i(p)\) as opposed to the upper index on \(X_p = \sum a^i(p)\evalat[\big]{\partial_{x_i}}{p}\).
%
If \(x \coloneqq x^1,y\coloneqq x^2,z \coloneqq x^3\), then \(\dif x, \dif y, \dif z\).
%
\begin{proposition}{\(\dif f\) in terms of coordinates}{}
    If \(f\colon U \rightarrow \R\), then
    \begin{equation}
        \dif f = \sum \pdv{f}{x^i}\dif x^i
    \end{equation}
\end{proposition}
%
\begin{proof}
    \[(\dif f)_p = \sum a_i(p) (\dif x^i)_p\]
    %
    for some real numbers \(a_i(p)\) depending on \(p\). Thus
    %
    \begin{splitenv}
        \dif f \left(\pdv{}{x^j} \right) &= \sum_i a_i \dif x^i \left(\pdv{}{x^j} \right) \\
        &= \sum_i a_i \delta_j^i = a_j
    \end{splitenv}
    %
    On the other hand, by the definition of the differential
    %
    \begin{equation}
        \dif f =  \left(\pdv{}{x^j} \right) = \pdv{f}{x^j}
    \end{equation}
    %
    Therefore
    \begin{equation}
        a_j = \pdv{f}{x^j}
    \end{equation}
    and hence
    \[(\dif f)_p = \evalat[\bigg]{\pdv{f}{x^i}}{p} (\dif x^i)_p\]
\end{proof}

\subsubsection{Differential \(k\)-forms}

\newcommand{\twoform}[2]{\dif #1 \wedge \dif #2}
\newcommand{\threeform}[3]{\dif #1 \wedge \dif #2 \wedge \dif #3}

\begin{definition}{Differential \(k\)-forms}{}
    More generally, a \newterm{differential form \(\w\) of degree \(k\)} is a function that at each point assigns an alternating \(k\)-linear function on \(\tsp{n}\), i.e. \(\w_p \in A^k(\tsp{n})\).
\end{definition}
%
A basis for \(A^k(\tsp{n})\) is
\begin{equation}
    (\dif x^I)_p \coloneqq (\dif x^{i_1})_p \wedge \cdots \wedge (\dif x^{i_k})_p
\end{equation}
%
where \(1 \leq i_1 < \cdots < i_k \leq n \).
%

\textbf{What is the nuance here?}

Therefore, at each point \(p \in U\), \(\w_p\) is a linear combination
%
\begin{splitenv}
    \w_p = \sum_I a_I(p) (\dif x^I)_p \\ 1 \leq i_1 < \cdots < i_k \leq n
\end{splitenv}
%
and a \(k\)-form \(\w\) on open \(U\) is a linear combination
%
\begin{equation}
    \w = \sum_I a_I \dif x^I
\end{equation}
%
with function coefficients \(a_I \colon U \rightarrow \R\).
%
We say that a \(k\)-form \(\w\) is \(C^\infty\) on \(U\) if all of the coefficients \(a_I\) are \(C^\infty\) functions on \(U\).
%
Denote \(\Omega^k(U)\) the vector space of \(k\)-forms on \(U\).
%
A 0-form on \(U\) assigns to each point \(p\) an element of \(A^0(\tsp{n}) \coloneqq \R\); thus, a 0-form on \(U\) is a constant function.
%
Note there are no nonzero differential forms of degree \(>n\) on \(U\) since if \(\deg \dif x^I > n\) then at least two of the component 1-forms of \(dx^I\) must be the same and therefore \(dx^I = 0\).

\begin{definition}{Wedge product of forms}{}
    The \newterm{wedge product of a \(k\)-form \(\w\) and \(\ell\)-form \(\tau\)} is defined pointwise
    %
    \begin{splitenv}
        (\w \wedge \tau)_p &\coloneqq \w_p \wedge \tau_p \\
        \w \wedge \tau &= \sum_{I,J}(a_I b_J) \dif x^I \wedge \dif x^J
    \end{splitenv}
    %
    where \(I \cap J = \emptyset\).
    %
\end{definition}
%
Hence the wedge product is bilinear
%
\begin{equation}
    \wedge \colon \Omega^k (U) \times \Omega^\ell \rightarrow \Omega^{k+\ell} (U)
\end{equation}
%
The wedge product of forms is also anticommutative and associate (owing to the associativity and anticommutativity of the wedge product on multi-covectors) as therefore induces a graded algebra on \(\Omega(U) \coloneqq \bigoplus_k \Omega^k(U)\).

\begin{example}{}{}
    In the case of
    %
    \[
        \wedge \colon \Omega^0(U) \times \Omega^\ell(U) \rightarrow \Omega^\ell
    \]
    %
    we have the pointwise multiplication of a \(C^\infty\) function and a \(C^\infty\) \(\ell\)-form
    %
    \[
        (f \wedge \w)_p = f(p) \wedge \w_p = f(p)\w_p
    \]
    %
    Let \(x,y,z\) be the coordinates on \(\R^3\). Then, the 1-forms are
    %
    \[
        f \dif x + g \dif y + h \dif z
    \]
    %
    the 2-forms are
    %
    \[
        f \dif y \wedge \dif z + g \dif x \wedge \dif z + h \dif x \wedge \dif y
    \]
    %
    and the 3-forms are
    %
    \[
        f \dif x \wedge \dif y \wedge \dif z
    \]
\end{example}

\subsubsection{Differential Forms as Multilinear Functions on Vector Fields}

If \(\w\) is a 1-form and \(X\) is a vector field then
%
\begin{splitenv}
    \evalat[]{\w(X)}{p} &\coloneqq \w_p (X_p) \\
    \w &\,= \sum a_i \dif x^i \quad X = \sum b^i \pdv{}{x^j} \\
    \w(X) &\,= \left( \sum a_i \dif x^i \right) \left( \sum b^j \pdv{}{x^j}\right) \\
    &\,= \sum a_i b^i
\end{splitenv}

\subsubsection{Exterior Derivative}

\begin{definition}{Exterior Derivative}{}
    The exterior derivative of a function \(f \in C^\infty(U)\) is defined to be its differential \(\dif f\)
    %
    \[
        \dif f = \sum \pdv{f}{x^i} \dif x^i
    \]
    %
    For \(k \geq 1\), if \(\w = \sum_I a_I \dif x^I\) is a \(k\)-form, then
    %
    \begin{splitenv}
        \dif \w &\coloneqq \sum_I \dif a_I \wedge \dif x^I \\
        &\,= \sum_I \left( \sum_j \pdv{a_I}{x^j} \dif x^j \right) \wedge \dif x^I
    \end{splitenv}
\end{definition}
%
\begin{example}
    Let \(\w\) be the 1-form \(f \dif x + g \dif y\) on \(R^2\). Then
    \begin{align}
        \dif \omega & = \dif f \wedge \dif x + \dif g \wedge \dif y                                              \\
                    & \,= \begin{multlined}[t]
            \left( \pdv{f}{x}\dif x + \pdv{f}{y}\dif y \right) \wedge \dif x \\
            + \left( \pdv{g}{x}\dif x + \pdv{g}{y}\dif y \right) \wedge \dif y
        \end{multlined}                                                             \\
                    & \,= \left(\pdv{g}{x} - \pdv{f}{y} \right)\dif x \wedge \dif y \label{exa:exteriordif1form}
    \end{align}
    where we use that \(\dif x \wedge \dif y = - \dif y \wedge \dif x\) and \(\dif x \wedge \dif x = 0\).
\end{example}

\begin{definition}{Antiderivation}
    %
    Let \(A = \bigoplus_k A^k\) be a graded algebra over a field \(K\). An \newterm{antiderivation of the graded algebra} A is a \(k\)-linear map \(D \colon A \rightarrow A\) such that for \(a \in A^k, b \in A^\ell\)
    %
    \begin{equation}
        D(ab) = (Da)b + (-1)^kaDb
    \end{equation}
    %
    If there is an integer \(m\) such that \(D\) sends \(A^k\) to \(A^{k+m}\) for all \(k\), then the antiderivation is of \textit{degree m}.
\end{definition}
%
\begin{proposition}{Properties of exterior differentiation}{exterioranti}
    \begin{enumerate}
        \item exterior differentiation is an antiderivation of degree 1:
              \[\dif\, (\w \wedge \tau) = (\dif \w) \wedge \tau + (-1)^{\deg \omega} \omega \wedge \dif \tau\]
        \item \(\dif^2 = 0\)
    \end{enumerate}
\end{proposition}
%
\begin{proposition}{Characterization of the exterior derivative}{}
    The properties of proposition~\eqref{prop:exterioranti} completely characterize exterior differentiation.
\end{proposition}

\subsubsection{Closed and Exact Forms}

A \(k\)-form \(\w\) is a \newterm{closed form} if \(\dif \w = 0\).
%
\(\w\) is an \newterm{exact form} if there is a \(k-1\)-form \(\tau\) such that \(\w = \dif \tau\).
%
Since \(\dif (\dif \tau) = 0\), every exact form is closed.

\begin{example}{A closed 1-form on the punctured plane}{}
    Define \(\w\) on the manifold \(\R^2-\{\bm{0}\}\) by 
    \[
        \omega(x,y) = \frac{-y}{x^2+y^2}\dif x + \frac{x}{x^2+y^2}\dif y
    \]
    To show that \(\w\) is closed we take the exterior derivative using example~\eqref{exa:exteriordif1form}:
    \begin{splitenv}
        \dif \w &= \left( \frac{y^2-x^2}{\left(x^2+y^2\right)^2} - \frac{y^2-x^2}{\left(x^2+y^2\right)^2} \right) \dif x \wedge \dif y \\ 
        &= 0
    \end{splitenv}
\end{example}

\begin{definition}{Differential Complex}{}
    A collection of vector spaces \(\{V^0, V^1, \dots\}\) with linear maps \(d_k \colon V^k \rightarrow V^{k+1}\) such that \(d_{k+1} \circ d_k = 0\) is called a \newterm{differential complex} or a \newterm{cochain complex}. For any open subset \(U \subset \R^3\), the exterior derivative makes the vector space \(\Omega^*(U)\) of \(C^\infty\) forms on \(U\) into a cochain complex, called the \newterm{de Rham complex of \(U\)}:
    \[
        0 \rightarrow \Omega^0(U) \xrightarrow{\text{ d }} \Omega^1(U) \xrightarrow{\text{ d }} \Omega^2(U) \xrightarrow{\text{ d }} \cdots
    \]
    The closed forms are the elements of the kernel of d and the exact forms are the elements of the image of d.
\end{definition}

\subsubsection{Applications to Vector Calculus}

Recall the three operators grad, curl, div (\(\grad, \curl, \div\)) on scalar fields and vector fields (i.e. scalar valued functions and vector valued functions) over \(\R^3\):
\begin{gather}
    \begin{split}
        \grad{f} &=
        \begin{bmatrix}
            \pdv{f}{x} \\
            \pdv{f}{y} \\
            \pdv{f}{z} \\
        \end{bmatrix} \\
        \curl{\begin{bmatrix}
                P \\ Q \\ R
            \end{bmatrix}} &=
        \begin{bmatrix}
            \pdv{}{x} \\
            \pdv{}{y} \\
            \pdv{}{z} \\
        \end{bmatrix} \times
        \begin{bmatrix}
            P \\ Q \\ R
        \end{bmatrix}
        =
        \begin{bmatrix}
            \pdv{R}{y} - \pdv{Q}{z}                 \\
            -\left( \pdv{R}{x} - \pdv{P}{z} \right) \\
            \pdv{Q}{x} - \pdv{P}{y}                 \\
        \end{bmatrix} \\
        \div{\begin{bmatrix}
                P \\ Q \\ R
            \end{bmatrix}} &=
        \begin{bmatrix}
            \pdv{}{x} \\
            \pdv{}{y} \\
            \pdv{}{z} \\
        \end{bmatrix} \cdot
        \begin{bmatrix}
            P \\ Q \\ R
        \end{bmatrix}
        =
        \pdv{P}{x} + \pdv{Q}{y} + \pdv{R}{z}
    \end{split}
\end{gather}
%
Note we can identity 1-forms with vector fields:
\[
    P \dif x + Q \dif y + R \dif z \longleftrightarrow \begin{bmatrix}
        P \\ Q \\ R
    \end{bmatrix}
\]
%
Similarly 2-forms on \(\R^3\)
\[
    P \twoform{x}{y}  + Q \twoform{z}{x} + R \twoform{x}{y} \longleftrightarrow \begin{bmatrix}
        P \\ Q \\ R
    \end{bmatrix}
\]
%
and 3-forms on \(U\) can be identified with functions \(U\)
%
\[
    f \threeform{x}{y}{z} \longleftrightarrow f
\]
%
In terms of these identifications the exterior derivative of 0-form \(f\) is the 1-form \(\dif f\) or \(\grad{f}\):
\[
    \dif f = \pdv{f}{x} \dif x + \pdv{f}{y} \dif y  + \pdv{f}{z} \dif z \longleftrightarrow
    \begin{bmatrix}
        \pdv{f}{x} \\
        \pdv{f}{y} \\
        \pdv{f}{z} \\
    \end{bmatrix} = \grad{f}
\]
%
the exterior derivative of a vector field \(\irow{P\; Q\; R}^T\) (i.e. 1-form) is the 2-form \(\curl{\irow{P\; Q\; R}^T}\)
%
\begin{splitenv}
    \dif \left( P\dif x + Q \dif y + R \dif z \right) = \\
    + \left( \pdv{R}{y} - \pdv{Q}{z} \right) \twoform{y}{z} \\
    - \left( \pdv{R}{x} - \pdv{P}{z} \right) \twoform{z}{x} \\
    + \left( \pdv{Q}{x} - \pdv{P}{y} \right) \twoform{x}{y}  \\ \longleftrightarrow \\ \curl{\begin{bmatrix}
            P \\ Q \\ R
        \end{bmatrix}}
\end{splitenv}
%
and the exterior derivative of a 2-form is
%
\begin{splitenv}
    \dif \left( P \twoform{x}{y}  + Q \twoform{z}{x} + R \twoform{x}{y} \right) = \\
    \left( \pdv{P}{x} \dif x + \pdv{Q}{y} \dif y  + \pdv{R}{z} \dif z \right) \threeform{x}{y}{z} \\
    \longleftrightarrow \div{\begin{bmatrix}
            P \\ Q \\ R
        \end{bmatrix}}
\end{splitenv}
%
Thus, the exterior derivatives on 0-forms (functions) is the grad operator, on 1-forms is the curl operator, and on 2-forms is the divergence operator.
%
\[
    \begin{tikzcd}
        \Omega^0(U) \arrow{r}{\dif} \arrow[swap]{d}{\cong} & \Omega^1(U) \arrow{r}{\dif} \arrow[swap]{d}{\cong} & \Omega^2(U) \arrow{r}{\dif} \arrow[swap]{d}{\cong} & \Omega^3(U) \arrow[swap]{d}{\cong}  \\
        C^\infty(U) \arrow[swap]{r}{\grad} & \mathfrak{X}(U) \arrow[swap]{r}{\curl} & \mathfrak{X}(U) \arrow[swap]{r}{\div} & C^\infty(U)
    \end{tikzcd}
\]
%
where \(\mathfrak{X}(U)\) is the \newterm{Lie algebra} of \(C^\infty\) vector fields on \(U\).
%
\begin{proposition}{grad, curl, div properties}{}
    \begin{enumerate}
        \item\label{prop1} \( \curl{\grad{f}} = 0 \)
        \item\label{prop2} \(\div(\curl{\irow{P \; Q \; R}^T}) = 0\)
        \item\label{prop3} On \(\R^3\), a vector field \textbf{F} is the gradient of some scalar function iff \(\curl{\textbf{F}}=0\)
    \end{enumerate}
\end{proposition}
%
Properties~(\ref{prop1},\ref{prop2}) express that \(\operatorname{d}^2 = 0\)
%
Property~\eqref{prop3} expresses the fact that a 1-form on \(\R^3\) is exact iff it is closed; it need not be true on a region other than \(\R^3\).
%
It turns out that whether proposition~\eqref{prop3} is true depends on the topology of \(U\).
%
One measure of the failure of a closed \(k\)-form to be exact is the quotient vector space 
%
\begin{equation}
    H^k(U) \coloneqq \frac{\{\text{closed \(k\)-forms on } U\}}{\{\text{exact \(k\)-forms on }U\}}
\end{equation}
%
called the \(k\)th \newterm{de Rham cohomolgy} of U.
%
The generalization of proposition~\eqref{prop3} to any differential on \(\R^n\) is called the \newterm{Poincare lemma}: for \(k \geq 1\), every closed \(k\)-form on \(\R^n\) is exact.
%
This is equivalent to the vanishing of the \(k\)th de Rham cohomology \(H^k(\R^n)\) for \(k \geq 1\).

\subsubsection{Convention on Subscripts and Superscripts}

Vector fields \(e_1, e_2, \dots\)have subscripts and differential forms \(\w^1, \w^2, \dots\) have superscripts.
%
Coordinate functions \(x^1, x^2, \dots\), being 0-forms, have superscripts.
%
Their differentials \(\dif x^i\) should also. 
%
Coordinate vector fields \(\pdv{}{x^i}\) are considered to have subscripts because the index is in the denominator.
%
Coefficient functions have subscripts or subscripts depending on whether they're coefficients functions for vector fields or forms.
%
This allows for ``conservation of indices'': if \(X = \sum a^i \partial_{x^i}\) and \(\w = \sum b_j \dif x^j\) then 
\[
    \w(X) = \left( \sum b_j \dif x^j \right) \left( \sum a^i \pdv{}{x^i} \right) = \sum b_i a^i
\]

\subsection{Manifolds}

\begin{definition}{Locally Euclidean}{}
    A topological space \(M\) is \newterm{locally Euclidean of dimension \(n\)} if for every \(p \in M\) there exists a neighborhood \(U\) such that there is a \newterm{homeomorphism}\tablefootnote{A homeomorphism is a continuous function between topological spaces that has a continuous inverse function.} \(\phi\) from \(U\) \textbf{onto} an opensubset of \(\R^n\). 
    %
    The pair \(\left( U,\phi \colon U \rightarrow \R^n \right)\) is called a \newterm{chart}, with \(U\) being the \newterm{coordinate neighborhood} and \(\phi\) the \newterm{coordinate system}.
\end{definition}

\begin{definition}{Topological Manifold}{}
    A \newterm{topological manifold} is a \newterm{Hausdorff}\tablefootnote{A Hausdorff space, separated space space is a topological space where for any two distinct points there exists a neighbourhood of each which is disjoint from the neighbourhood of the other. }, \newterm{second countable}\tablefootnote{A topological space \(T\) is second-countable if there exists some countable collection ${\displaystyle {\mathcal {U}}=\{U_{i}\}_{i=1}^{\infty }}$ of open subsets of $T$ such that any open subset of $T$ can be written as a union of elements of some subfamily of ${\mathcal {U}}$.}, locally Euclidean space.
\end{definition}

\subsubsection{Compatible Charts}

Suppose \(\left( U,\phi \colon U \rightarrow \R^n \right)\) and \(\left( V,\psi \colon V \rightarrow \R^n \right)\) are two charts of a topological manifold; since \(U \cap V\) is open and \(\phi\) is a homeomorphism onto an open subset, the image \(\phi(U \cap V)\) is also an open subset (similarly \(\psi(U \cap V)\)).

\begin{definition}{Charts}{}
    Two charts \(\left( U,\phi \colon U \rightarrow \R^n \right)\) and \(\left( V,\psi \colon V \rightarrow \R^n \right)\) of a topological manifold are \newterm{\(C^\infty\)-compatible} if the two composed maps
    %
    \begin{splitenv}
        \phi \circ \psi^{-1}\colon \psi(U \cap V) \rightarrow \phi(U \cap V) \\ 
        \psi \circ \phi^{-1}\colon \phi(U \cap V) \rightarrow \psi(U \cap V)
    \end{splitenv}
    %
    See figure~\ref{fig:compatcoordcharts}.
    %
    These two maps \(\phi \circ \psi^{-1}\) and \(\psi \circ \phi^{-1}\) are called the \newterm{transition functions} between the charts;
    \begin{splitenv}
        \phi \circ \psi^{-1}\colon \R^n \rightarrow U \cap V \rightarrow \R^n \\
        \psi \circ \phi^{-1}\colon \R^n \rightarrow U \cap V \rightarrow \R^n
    \end{splitenv}
\end{definition}
% \loadfig{coordinatechart}
\begin{definition}{Atlas}{}
    A \(C^\infty\) \newterm{atlas} on a topological manifold \(M\) is a collection \(\mathfrak{U} \coloneqq \{(U_i, \phi_i)\}\) of pairwise \(C^\infty\)-compatible charts that \textit{cover} \(M\), i.e. such that \(M = \bigcup_i U_i\).
\end{definition}
\begin{example}{A \(C^\infty\) atlas on a circle}{}
    The unit circle \(S^1\) in the complex plane \(\mathbb{C}\) maybe described as 
    \[
        \{e^\iu \in \C | 0 \leq t \leq 2\pi\}    
    \]
    Let \(U_1, U_2\) be 
    \begin{splitenv}
        U_1 &\coloneqq \{e^{\iu t} \in \C | -\pi < t < \pi\}    \\
        U_2 &\coloneqq \{e^{\iu t} \in \C | 0 < t < 2\pi\}    
    \end{splitenv}
    and define 
    \begin{splitenv}
        \phi_1(e^{\iu t}) &= t \quad -\pi < t < \pi \\
        \phi_2(e^{\iu t}) &= t \quad 0 < t < 2\pi \\
    \end{splitenv}
    See figure~\ref{fig:chartsoncircle}.
    %
    Both \(\phi_1, \phi_2\) are homemorphisms onto their respective images; thus, \(U_1, \phi_1\) and \(U_2, \phi_2\) are charts on \(S^1\).
    %
    The intersection \(U_1 \cap U_2\) consists of two disjoint connected components 
    \begin{splitenv}
        A &\coloneqq \{e^{\iu t} \in \C | -\pi < t < 0\}    \\
        B &\coloneqq \{e^{\iu t} \in \C | 0 < t < \pi\}    
    \end{splitenv}
    with 
    \begin{splitenv}
        \phi_1(U_1 \cap U_2) &= \phi_1 (A \sqcup B) = \phi_1(A) \sqcup \phi_2(B) = (-\pi,0) \sqcup (0, \pi) \\ 
        \phi_2(U_1 \cap U_2) &= \phi_1 (B \sqcup A) = \phi_1(B) \sqcup \phi_2(A) = (0, \pi)\sqcup(\pi, 2\pi)\\
    \end{splitenv}
    where \(\sqcup\) means disjoint union.
    %
    The transition function 
    \[
        \left( \phi_2 \circ \phi_1^{-1} \right)(t) = \begin{cases}
            t+2\pi &\text{ for } t\in (-\pi, 0) \\ 
            t &\text{ for } t\in (0, \pi) 
        \end{cases}
    \]
    and similarly
    \[
        \left( \phi_1 \circ \phi_2^{-1} \right)(t) = \begin{cases}
            t &\text{ for } t\in (0, \pi) \\ 
            t-2\pi &\text{ for } t\in (\pi, 2\pi) 
        \end{cases}
    \]
    Therefore, since the transition functions are \(C^\infty\), the charts are \(C^\infty\) compatible and form an atlas on \(S^1\).
\end{example}
\loadfig{circlatlas}

Although compatibility is reflexive and symmetric it is not transitive because we don't know anything about mutual intersections.
%
On the otherhand 
%
\begin{lemma}{}{}
    Let \(\{(U_i, \phi_i)\}\) be an atlas for a topological manifold. If two other charts (not in the atlas) \((V, \psi), (U, \phi)\) are both compatible with the atlas (i.e. with all charts in the atlas), then they are mutually compatible.
\end{lemma}

\subsubsection{Smooth Manifolds}

An atlas \(\mathfrak{M}\) on a topological manifold is said to be \newterm{maximal} if it is not strictly contained in another atlas.
\begin{definition}{Smooth Manifold}{}
    A \newterm{smooth \(C^\infty\) manifold} is a topological manifold \(M\) together with a maximal atlas. 
    %
    The maximal atlas is called a \newterm{differentiable structure} on \(M\).
    %
    \(M\) is said to have dimension \(n\) if all of its connected components have dimension \(n\).
    %
    A 1-dimensional manifold is called a \newterm{curve}, a 2-dimensional manifold is called a \newterm{surface}, and an \(n\)-dimensional manifold is called an \(n\)-manifold.
\end{definition}

In the context of manifolds, we denote the standard coordinates on \(\R^n\) by \(r^1, \dots, r^n\).
%
If \((U, \phi)\) is a chart of a manifold, we let \(x^i = r^i \circ \phi\) be the \(i\)th component of \(\phi\) and write \(\phi = (x^1, \dots, x^n)\).
%
Thus, \(x^i(p) \coloneqq (r^i \circ \phi)(p)\) is a point in \(\R^n\). 
%
The functions \(x^i\) are called the \newterm{local coordinates on U}.
%
Abusing notation, sometimes \((x^1, \dots, x^n)\) (sans \(p\)) stands for both the coordinates on \(U\) or for a point in \(\R^n\).

\subsubsection{Examples of Smooth Manifolds}

\begin{example}{Graph of a Smooth Function}{}
    For a subset \(A \subset \R^n\) and a function \(f \colon A \rightarrow \R^m\) the \newterm{graph of f} is defined 
    \[
        \Gamma(f) = \{(x, f(x)) \in A \times \R^m\}
    \]
    If \(U\) is an open subset \(\R^n\) and \(f \colon U \rightarrow \R^n\) is \(C^\infty\), then the two maps
    \begin{align*}
        \phi \colon \Gamma(f) \rightarrow U \quad (x, f(x)) \mapsto x \\ 
        (1, f) \colon \rightarrow \Gamma(f) \quad x \mapsto (x, f(x))
    \end{align*}
    constitute a homemorphism. Hence, \(\Gamma(f)\) has an atlas with a single \((\Gamma(f), \phi)\) and is therefore a \(C^\infty\) manifold.
\end{example}

\begin{example}{General Linear group}{}
    Let \(\R^{m \times n}\) be the vector space of all \(m \times n\) matrices.
    Since \(\R^{m \times n}\) is isomorphic to \(\R^{mn}\), we give it the topology of \(\R^{mn}\).
    The \newterm{general linear group \(\operatorname{GL}(n, \R)\)} is defined 
    \begin{splitenv}
        \operatorname{GL}(n, \R) &\coloneqq \{A \in \R^{n\times n} | \det(A) \neq 0\}  \\ 
        &\;= \operatorname{det}^{-1} (\R - \{0\})
    \end{splitenv}
    Since the determinant function \(\det \colon \R^{n\times n}\rightarrow \R\) is continuous, \(\operatorname{GL}(n, \R)\) is an open subset of \(\R^{n \times n}\cong \R^{n^2} \) is therefore a manifold.
\end{example}

\begin{example}{Unit circle in the \(xy\)-plane}
    Take \(S^1\) as the unit circle in the real plane \(\R^2\) defined by \(x^2+y^2=1\).
    We can cover \(S^1\) by four open sets: the upper and lower semicircles \(U_1, U_2\) and the left and right semicircles \(U_3, U_4\)
    (see figure~\ref{fig:xychartsoncircle}).
    On \(U_1, U_2\) the coordinate function \(x\) is a homeomorphism onto the open interval \((-1,1)\) on the \(x\)-axis.
    Thus, \(\phi_i(x,y) \coloneqq x\). Similarly, on \(U_3, U_4\), \(y\) is a homeomorphism onto the open interval \((-1,1)\) on the \(y\)-axis, and so \(\phi_i(x,y) \coloneqq y\).
    You can check that on \(U_i \cap U_j\), the transition function \(\phi_j \circ \phi_i^{-1}\) is \(C^\infty\). 
    For example, on \(U_1 \cap U_3\)
    \[
        (\phi_3 \circ \phi_1^{-1})(x) = \phi_3 (x, \sqrt{1-x^2}) = \sqrt{1-x^2}
    \]
    while on \(U_2 \cap U_4\)
    \[
        (\phi_4 \circ \phi_2^{-1})(x) = \phi_4 (x, -\sqrt{1-x^2}) = -\sqrt{1-x^2}
    \]
    Thus, \(\{(U_i, \phi_i)\}_{i=1}^4\) is a \(C^\infty\) atlas on \(S^1\).
\end{example}
\loadfig{chartsoncirc}

\begin{proposition}{An atlas for a product manifold}{}
    If \(\{(U_i, \phi_i)\}\) and \(\{(V_i, \psi_i)\}\) are \(C^\infty\) atlases for the manifolds \(M,N\) of dimensions, respectively, then the collection 
    \begin{equation}
        \{ (U_i \times V_j, (\phi_i, \phi_j)) \colon U_i \times V_j \rightarrow \R^m \times \R^n \} 
    \end{equation}
    is a \(C^\infty\) atlas on \(M \times N\). Therefore \(M \times N\) is a \(C^\infty\) manifold of dimension \(m+n\).
\end{proposition}

There \(n\)-dimensional torus \(S^1 \times \cdots \times S^1\) is a manifold.

\subsection{Smooths Maps on a Manifold}